

/**
 * 给定一个double类型的浮点数base和int类型的整数exponent。求base的exponent次方。
 *
 * 本题关键在于要考虑当底数为0，指数是负数的时候要做异常处理
 */
public class wrk9 {

    public double Power(double base, int exponent) {

        double result = 0.0;
            if (base == 0.0 && exponent < 0) {
                return -1;

            }

            int absexp = exponent;
            if (exponent < 0)
                absexp = -exponent;

            result = powerWithExponent(base, absexp);
            if (exponent < 0)
                result = 1.0 / result;
            return result;

    }

    /**
     * 递归：n为偶数，a^n=a^n/2*a^n/2;n为奇数，a^n=（a^（n-1）/2）*（a^（n-1/2））*a
     * 时间复杂度O（logn）
     * @param base
     * @param exponent
     * @return
     */
    private double powerWithExponent(double base, int exponent) {
        if(exponent == 0)
            return 1;
        if(exponent == 1)
            return base;
        double result = powerWithExponent(base,exponent>>1);//exponent>>1相当于除以2
        result *= result;
        if((exponent&0x1)== 1){ //exponent&0x1)== 1相当于取余数看是否是奇数
            result = result*base;
        }
        return result;

    }

    public static void main(String args[]){
        System.out.println(new wrk9().Power(0.0,-2));

    }
}
